<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE xmluiml SYSTEM "View.dtd">
<xmluiml xmlns="http://www.series60.com/xml/xmluiml/1" version="1.0">
    <view id="hs_qhd_tch_templateview">
        <actions>
            <action>
                <!-- End key -->
                <trigger name="keyevent">
                    <property name="scancode" value="197"/> ><!-- End key -->
                    <property name="eventtype" value="1"/>
                </trigger>
                <!-- dismiss if edit mode active -->
                <event name="system/reportexiteditmode"/>
            </action>
            <action>
                <trigger name="editmode" value="enter"/>
                <event name="system/set">
                    <property name="name" value="focusable"/>
                    <property name="value" value="true"/>
                    <property name="type" value="string"/>
                    <property name="class" value="plugins"/>
                </event>
                <event name="system/seteditmode">
                    <property name="id" value="hs_popup_open_hold"/>                                                  
                </event>                                    
            </action>                
            <action>
                <trigger name="editmode" value="exit"/>
                <event name="system/set">
                    <property name="name" value="focusable"/>
                    <property name="value" value="false"/>
                    <property name="type" value="string"/>
                    <property name="class" value="plugins"/>
                </event>
                <event name="system/reseteditmode">
                    <property name="id" value="hs_popup_open_hold"/>                                        
                </event>                                                    
            </action>                                
            <action>
                <trigger name="swipe" direction="left" conditional="true"/>
                <event name="system/activatenextview"/>
                <event name="system/runfullscreeneffect" effectid="1003"/>
            </action>
            <action>
                <trigger name="swipe" direction="right" conditional="true"/>
                <event name="system/activatepreviousview"/>
                <event name="system/runfullscreeneffect" effectid="1004"/>
            </action>
            <action>
                <trigger name="screendevicechange" reason="portrait"/>
                <event name="system/set">
                    <property name="name" value="padding-left"/>
                    <property name="value" value="17px"/>
                    <property name="type" value="numeric"/>
                    <property name="id" value="plugins_container"/>
                </event>
                <event name="system/set">
                    <property name="name" value="padding-right"/>
                    <property name="value" value="17px"/>
                    <property name="type" value="numeric"/>
                    <property name="id" value="plugins_container"/>
                </event>
            </action>
            <action>
                <trigger name="screendevicechange" reason="landscape"/>
                <event name="system/set">
                    <property name="name" value="padding-left"/>
                    <property name="value" value="0px"/>
                    <property name="type" value="numeric"/>
                    <property name="id" value="plugins_container"/>
                </event>
                <event name="system/set">
                    <property name="name" value="padding-right"/>
                    <property name="value" value="0px"/>
                    <property name="type" value="numeric"/>
                    <property name="id" value="plugins_container"/>
                </event>
            </action>
            <action>
                <!-- No widgets in this view -->
                <trigger name="widgetamount" value="0"/>
                <event name="system/set">
                    <!-- Hide "remove content" menuitem -->
                    <property name="name" value="display"/>
                    <property name="value" value="none"/>
                    <property name="type" value="string"/>
                    <property name="id" value="hs_remove_widget"/>
                </event>
            </action>
            <action>
                <!-- At least one widget added to this view -->
                <trigger name="widgetamount" value="1"/>
                <event name="system/set">
                    <!-- Show "remove content" menuitem -->
                    <property name="name" value="display"/>
                    <property name="value" value="block"/>
                    <property name="type" value="string"/>
                    <property name="id" value="hs_remove_widget"/>
                </event>
            </action>
        </actions>

        <!-- Plugins in this view -->
        <box id="plugins_container">
            <plugin id="plugin1" class="plugins" actionshandler="plugin_actions" />
            <plugin id="plugin2" class="plugins" actionshandler="plugin_actions" />
            <plugin id="plugin3" class="plugins" actionshandler="plugin_actions" />
            <plugin id="plugin4" class="plugins" actionshandler="plugin_actions" />
            <plugin id="plugin5" class="plugins" actionshandler="plugin_actions" />
            <plugin id="plugin6" class="plugins" actionshandler="plugin_actions" />
        </box>

        <!-- plugins' actions handler -->
        <actionshandler id="plugin_actions">
            <actions>
                <action>
                    <trigger id="hs_popup_open_hold" name="hold" conditional="true" />
                    <event name="system/reportentereditmode" />
                    <event name="system/runfullscreeneffect" effectid="1005"/>
                </action>
            </actions>
        </actionshandler>

        <!-- Avkon stylus popup menu is not layout capable -->
        <styluspopup id="hs_popup_menu" display="none">
            <!-- "Add content" item initialized in runtime to check whether popup is on top of empty space -->
            <dynmenuitem id="hs_popup_add_widget" type="hs_add_widget" label="&qtn_hs_longtap_add;">
                <actions>
                    <action>
                        <trigger name="activate"/>
                        <event name="system/runaddwidgetquery"/>
                    </action>
                </actions>
            </dynmenuitem>
            <!-- menuitems controlled by widgets' <menuextension> -->
            <widgetmenuitem id="hs_popup_widget_settings" source="hs_widget_menuitem_settings" label="&qtn_hs_longtap_settings;" />
            <widgetmenuitem id="hs_popup_widget_general_1" source="hs_widget_general_stylus_popup_1"/>
            <widgetmenuitem id="hs_popup_widget_general_2" source="hs_widget_general_stylus_popup_2"/>
            <!--<widgetmenuitem id="hs_popup_widget_refresh" source="hs_widget_menuitem_refresh" label="Refresh" />-->
            <!-- "Remove" item initialized in runtime to check whether popup is on top of widget -->
            <dynmenuitem id="hs_popup_remove_widget" type="hs_remove_widget" label="&qtn_hs_longtap_remove_element;">
                <actions>
                    <action>
                        <trigger name="activate"/>
                        <event name="system/removefocusedwidget"/>
                    </action>
                </actions>
            </dynmenuitem>
        </styluspopup>
        <menubar id="hs_menubar">
            <!-- menu item grouping table is traversed through in run-time always when options menu is launched. -->
            <menuitemgrouping>
                <!-- These items are shown when content is visible -->
                <menuitemgroup id="Menu/WidgetsShown">
                    <property name="hs_widget_catalog"/>
                    <property name="hs_edit_widgets"/>
                    <property name="hs_set_online"/>
                    <property name="hs_set_offline"/>
                    <property name="hs_add_view"/>
                    <property name="hs_remove_view"/>
                </menuitemgroup>
                <!-- These items are shown in edit mode, if not otherwise changed in the declaration -->
                <menuitemgroup id="Menu/EditMode">
                    <property name="hs_widget_catalog"/>
                    <property name="hs_remove_widget"/>
                    <property name="hs_widget_settings"/>
                    <property name="hs_widget_general_1"/>
                    <property name="hs_widget_general_2"/>
                    <property name="hs_add_view"/>
                    <property name="hs_remove_view"/>
                    <property name="hs_change_wallpaper"/>
                </menuitemgroup>
                <!-- These items are always shown, if not otherwise changed in the declaration -->
                <menuitemgroup id="Menu/AlwaysShown">
                    <property name="hs_show_help"/>
                </menuitemgroup>
            </menuitemgrouping>
            <menu id="hs_options_menu">
                <menuitem id="hs_widget_catalog" label="&qtn_hs_widget_catalog;">
                    <actions>
                        <action>
                            <trigger name="activate"/>
                            <event name="system/runaddwidgetquery"/>
                        </action>
                    </actions>
                </menuitem>
                <menuitem id="hs_add_widget" label="&qtn_hs_add_widget;">
                    <actions>
                        <action>
                            <trigger name="activate"/>
                            <event name="system/runaddwidgetquery"/>
                        </action>
                    </actions>
                </menuitem>
                <!-- menuitems controlled by widgets' <menuextension> element -->
                <widgetmenuitem id="hs_widget_settings" source="hs_widget_menuitem_settings" label="&qtn_hs_widget_settings;"/>
                <widgetmenuitem id="hs_widget_general_1" source="hs_widget_general_options_menu_1"/>
                <widgetmenuitem id="hs_widget_general_2" source="hs_widget_general_options_menu_2"/>
                <dynmenuitem id="hs_remove_widget" type="hs_remove_widget" label="&qtn_hs_remove_widget;">
                    <actions>
                        <action>
                            <trigger name="activate"/>
                            <event name="system/removefocusedwidget"/>
                        </action>
                    </actions>
                </dynmenuitem>
                <!--<widgetmenuitem id="hs_widget_refresh" source="hs_widget_menuitem_refresh" label="&qtn_hs_refresh_widget;" />-->
                <menuitem id="hs_edit_widgets" label="&qtn_hs_edit_content;">
                    <actions>
                        <action>
                            <trigger name="activate"/>
                            <event name="system/reportentereditmode"/>
                            <event name="system/runfullscreeneffect" effectid="1005"/>
                        </action>
                    </actions>
                </menuitem>
                <menuitem id="hs_change_wallpaper" label="&qtn_hs_change_wallpaper;">
                    <actions>
                        <action>
                            <trigger name="activate"/>
                            <!--Wallpaper-->
                            <event name="system/setwallpaper"/>
                        </action>
                    </actions>
                </menuitem>
                <dynmenuitem id="hs_add_view" type="hs_add_view" label="&qtn_hs_page_options_new;">
                    <actions>
                        <action>
                            <trigger name="activate"/>
                            <event name="system/addview"/>
                            <event name="system/runfullscreeneffect" effectid="1009"/>
                        </action>
                    </actions>
                </dynmenuitem>
                <dynmenuitem id="hs_remove_view" type="hs_remove_view" label="&qtn_hs_page_options_delete;">
                    <actions>
                        <action>
                            <trigger name="activate"/>
                            <event name="system/removeview"/>
                            <event name="system/runfullscreeneffect" effectid="1010"/>
                        </action>
                    </actions>
                </dynmenuitem>
                <dynmenuitem id="hs_set_online" type="hs_online" label="&qtn_hs_online;">
                    <actions>
                        <action>
                            <trigger name="activate"/>
                            <event name="EventHandler/SetOnline"/>
                        </action>
                    </actions>
                </dynmenuitem>
                <dynmenuitem id="hs_set_offline" type="hs_offline" label="&qtn_hs_offline;">
                    <actions>
                        <action>
                            <trigger name="activate"/>
                            <event name="EventHandler/SetOffline"/>
                        </action>
                    </actions>
                </dynmenuitem>
                <menuitem id="hs_show_help" label="&qtn_options_help;">
                    <actions>
                        <action>
                            <trigger name="activate"/>
                            <event name="EventHandler/ShowHelp"/>
                        </action>
                    </actions>
                </menuitem>
            </menu>
            <softkey id="lsk" type="left" label="&text_softkey_options;">
                <actions>
                    <action>
                        <trigger name="activate"/>
                        <event name="system/trydisplayingmenu">
                            <property name="id" value="hs_options_menu"/>
                        </event>
                    </action>
                </actions>
            </softkey>
            <!-- <softkey id="rsk" type="right" mode="mode_callinactive" label="&text_softkey_call;"> -->
            <softkey id="rsk" type="right" mode="mode_callinactive" label="#Call">
                <actions>
                    <action>                        
                        <trigger name="activate"/>
                        <event name="EventHandler/ActivateView" uid="0x100058B3" viewid="0x10282D81" messageid="0x1"/>
                    </action>
                    <action>
                        <trigger name="hold"/>
                        <!-- Voice command-->
                        <event name="EventHandler/LaunchApp" uid="0x101F8543"/>
                    </action>
                </actions>
            </softkey>
            <softkey id="rsk_incall" type="right" mode="mode_callactive" label="&text_softkey_back;">
                <actions>
                    <action>                        
                        <trigger name="activate"/>
                        <event name="EventHandler/ActivatePhoneView" />
                    </action>
                </actions>
            </softkey>
            <softkey id="rsk_done" type="right" mode="mode_edit" label="&text_softkey_done;">
                <actions>
                    <action>
                        <trigger name="activate"/>
                        <event name="system/reportexiteditmode"/>
                        <event name="system/runfullscreeneffect" effectid="1006"/>
                    </action>
                </actions>
            </softkey>
            <softkey id="msk" type="middle" label="">
                <actions>
                    <action>
                        <trigger name="activate"/>
                        <event name="system/activatenextview"/>
                        <event name="system/runfullscreeneffect" effectid="1003"/>
                    </action>
                </actions>
                <!--image id="switcher_icon"/-->
            </softkey>
        </menubar>
    </view>
</xmluiml>
